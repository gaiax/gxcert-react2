(this["webpackJsonpgxcert-react2"]=this["webpackJsonpgxcert-react2"]||[]).push([[0],{1144:function(e,t){},1238:function(e,t,r){},1241:function(e,t,r){"use strict";r.r(t);var n=r(4),a=r.n(n),c=r(189),s=r.n(c),i=(r(459),r(56)),o=r(10),u=r(11),p=r(17),l=r(16),f=(r.p,r(446)),h=r.n(f)()(),b=r(48),d=r(1);var j=function(e){return Object(d.jsxs)("header",{className:"App-header",children:[Object(d.jsxs)("div",{className:"header-wrapper",children:[Object(d.jsx)(b.b,{to:"/",className:"logo",children:"GxCert"}),Object(d.jsx)(b.b,{to:"/certs",className:"header-left-link",children:"CREATED"}),Object(d.jsx)(b.b,{to:"/new",className:"header-left-link",children:"ISSUE"})]}),Object(d.jsx)("div",{className:"sign-in-button",onClick:function(){return h.push("/signup")},children:"SIGN IN"})]})};var m=function(){return Object(d.jsxs)("div",{className:"top",children:[Object(d.jsx)("div",{className:"top-left"}),Object(d.jsxs)("div",{className:"top-right",children:[Object(d.jsx)("p",{className:"concept",children:"\u78ba\u304b\u306a\u8a3c\u660e\u66f8\u3092\u8ab0\u306b\u3067\u3082\u7c21\u5358\u306b"}),Object(d.jsx)("p",{className:"concept-large",children:"\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u6280\u8853\u306b\u3088\u308b\u3001\u6539\u3056\u3093\u3055\u308c\u306a\u3044\u78ba\u304b\u306a\u8a3c\u660e\u66f8\u3092\u7c21\u5358\u306b\u767a\u884c\u3001\u53d7\u3051\u53d6\u308a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002"}),Object(d.jsx)(b.b,{to:"/signup",children:Object(d.jsx)("div",{className:"sign-up",children:"SIGN UP"})})]})]})},g=r(0),O=r.n(g),x=r(24),v=r(447),N=r.n(v),C=r(149),w=r.n(C),y=new(function(){function e(){Object(o.a)(this,e),this.torus=new N.a}return Object(u.a)(e,[{key:"init",value:function(){var e=Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.torus.init({buildEnv:"production",enableLogging:!0,network:{host:"https://matic-mumbai.chainstacklabs.com",chainId:80001,networkName:"Mumbai Testnet"},showTorusButton:!0,enabledVerifiers:{google:!0,facebook:!1,reddit:!1,twitch:!1,discord:!1}});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.torus.login();case 2:return t=e.sent,console.log(t),console.log(this.torus),this.web3=new w.a(this.torus.provider),console.log(this.web3),e.abrupt("return",this.web3);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPublicAddressByGoogle",value:function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.torus.getPublicAddress({verifier:"google",verifierId:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),E=r(262),k=r.n(E),_={web3Host:"https://matic-mumbai.chainstacklabs.com",contractAddress:"0x148d5A48945f78e47C283580a127bF6F85497B57",gxApi:"https://asia-northeast1-gxcert-21233.cloudfunctions.net/gxcert"},G=null,I=new k.a(new w.a(_.web3Host),_.contractAddress);function A(){return T.apply(this,arguments)}function T(){return(T=Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I.isInitialized()){e.next=3;break}return e.next=3,I.init();case 3:return e.abrupt("return",I);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){if(null===G&&e&&(G=new k.a(e,_.contractAddress,_.gxApi)),null===G)throw new Error("gxCert is not initialized.");return G}var F=function(e){return Object(d.jsx)("div",{className:"sign-in",children:Object(d.jsxs)("div",{className:"sign-in-content",children:[Object(d.jsx)("p",{className:"sign-in-message",children:"\u30b5\u30fc\u30d3\u30b9\u306e\u5229\u7528\u306b\u306fGoogle\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u306e\u8a8d\u8a3c\u304c\u5fc5\u9808\u3067\u3059\u3002Google\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u8a8d\u8a3c\u3092\u884c\u3063\u305f\u5f8c\u3001\u767b\u9332\u3092\u5b8c\u4e86\u3055\u305b\u3066\u304f\u3060\u3055\u3044\u3002"}),Object(d.jsx)("img",{src:"/google.png",onClick:e.signIn})]})})};var R=function(e){Object(p.a)(r,e);var t=Object(l.a)(r);function r(){return Object(o.a)(this,r),t.call(this)}return Object(u.a)(r,[{key:"componentDidMount",value:function(){this.props.fetchCertificates()}},{key:"render",value:function(){return Object(d.jsx)("div",{className:"certificates",children:Object(d.jsxs)("div",{className:"certificates-content",children:[Object(d.jsx)(b.b,{to:"/new",className:"new-cert-button",children:"\u65b0\u898f\u4f5c\u6210"}),Object(d.jsx)("br",{}),Object(d.jsx)("p",{className:"certificates-title",children:"\u8a3c\u660e\u66f8"}),Object(d.jsxs)("div",{className:"certificates-list",children:[0===this.props.certificates.length?Object(d.jsx)("p",{className:"certificate-not-found",children:"Certificate not found."}):"",this.props.certificates.map((function(e,t){return Object(d.jsx)(b.b,{to:"/certs/"+e.cid,children:Object(d.jsxs)("div",{className:"certificates-list-cell",children:[Object(d.jsx)("img",{src:e.imageUrl,className:"certificates-list-cell-icon"}),Object(d.jsxs)("div",{className:"certificates-list-cell-detail",children:[Object(d.jsx)("p",{className:"certificates-list-cell-title",children:e.title}),Object(d.jsx)("p",{className:"certificates-list-cell-date",children:e.issued_at?new Date(e.issued_at).toISOString():""}),Object(d.jsx)("p",{className:"certificates-list-cell-by",children:e.from})]})]})})}))]})]})})}}]),r}(a.a.Component),H=r(151),D=r(259)({host:"ipfs.infura.io",port:5001,protocol:"https"});function U(e){var t=new Blob([e]);return(window.URL||window.webkitURL).createObjectURL(t)}var L=function(e,t){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r.buffer};function S(e){var t,r,n,a,c,s,i,o,u,p,l,f,h,b,d,j;return O.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,O.a.awrap(D.get(e));case 2:t=m.sent,r=!0,n=!1,m.prev=5,c=Object(H.a)(t);case 7:return m.next=9,O.a.awrap(c.next());case 9:return s=m.sent,r=s.done,m.next=13,O.a.awrap(s.value);case 13:if(i=m.sent,r){m.next=56;break}o=i,console.log(o),u=new ArrayBuffer(0),p=!0,l=!1,m.prev=20,h=Object(H.a)(o.content);case 22:return m.next=24,O.a.awrap(h.next());case 24:return b=m.sent,p=b.done,m.next=28,O.a.awrap(b.value);case 28:if(d=m.sent,p){m.next=35;break}u=L(u,d);case 32:p=!0,m.next=22;break;case 35:m.next=41;break;case 37:m.prev=37,m.t0=m.catch(20),l=!0,f=m.t0;case 41:if(m.prev=41,m.prev=42,p||null==h.return){m.next=46;break}return m.next=46,O.a.awrap(h.return());case 46:if(m.prev=46,!l){m.next=49;break}throw f;case 49:return m.finish(46);case 50:return m.finish(41);case 51:return j=U(u),m.abrupt("return",j);case 53:r=!0,m.next=7;break;case 56:m.next=62;break;case 58:m.prev=58,m.t1=m.catch(5),n=!0,a=m.t1;case 62:if(m.prev=62,m.prev=63,r||null==c.return){m.next=67;break}return m.next=67,O.a.awrap(c.return());case 67:if(m.prev=67,!n){m.next=70;break}throw a;case 70:return m.finish(67);case 71:return m.finish(62);case 72:return m.abrupt("return",null);case 73:case"end":return m.stop()}}),null,null,[[5,58,62,72],[20,37,41,51],[42,,46,50],[63,,67,71]],Promise)}var M=function(e){Object(p.a)(r,e);var t=Object(l.a)(r);function r(){var e;return Object(o.a)(this,r),(e=t.call(this)).state={from:"",to:"",title:"",description:"",issued_at:new Date(0),url:"",image:""},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.props.fetchCertificate(e)}},{key:"render",value:function(){return Object(d.jsx)("div",{className:"certificate",children:Object(d.jsxs)("div",{className:"certificate-content",children:[Object(d.jsx)("p",{className:"certificate-title",children:this.props.certificate.title}),Object(d.jsx)("img",{src:this.props.certificateImage,className:"certificate-icon"}),this.state.description,Object(d.jsxs)("table",{className:"certificate-detail",children:[Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"From: "}),Object(d.jsx)("td",{children:Object(d.jsx)(b.b,{to:"/group/"+this.props.certificate.groupId,children:this.props.certificate.from})})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"To: "}),Object(d.jsx)("td",{children:this.props.certificate.to})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Date of issue: "}),Object(d.jsx)("td",{children:this.props.certificate.issued_at?new Date(this.props.certificate.issued_at).toISOString():""})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"URL: "}),Object(d.jsx)("td",{children:Object(d.jsx)("a",{href:this.props.certificate.url,target:"_blank",children:this.props.certificate.url})})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Description: "}),Object(d.jsx)("td",{children:this.props.certificate.description})]})]}),Object(d.jsxs)("div",{className:"certificate-buttons",children:[Object(d.jsx)("div",{className:"certificate-button",children:"\u53c2\u7167URL\u306e\u767a\u884c"}),Object(d.jsx)("div",{className:"certificate-button",children:"PDF\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9"})]})]})})}}]),r}(a.a.Component),B=function(e){Object(p.a)(r,e);var t=Object(l.a)(r);function r(){return Object(o.a)(this,r),t.call(this)}return Object(u.a)(r,[{key:"componentDidMount",value:function(){this.props.fetchGroups()}},{key:"render",value:function(){var e="";try{e=U(this.props.image)}catch(t){console.error(t)}return Object(d.jsx)("div",{className:"new-cert",children:Object(d.jsxs)("div",{className:"new-cert-content",children:[Object(d.jsx)("p",{className:"new-cert-title",children:"\u8a3c\u660e\u66f8\u306e\u767b\u9332"}),Object(d.jsx)("p",{className:"new-cert-description",children:"\u8a3c\u660e\u66f8\u3092\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u8a3c\u660e\u66f8\u306f\u8907\u6570\u767b\u9332\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u305d\u308c\u305e\u308c\u306e\u8907\u6570\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u5bfe\u3057\u3066\u767a\u884c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002"}),Object(d.jsxs)("div",{className:"new-cert-form",children:[Object(d.jsx)("p",{className:"new-cert-form-title",children:"From"}),Object(d.jsxs)("select",{className:"new-cert-form-group",onChange:this.props.onChangeGroup,children:[Object(d.jsx)("option",{hidden:!0,children:"Select group"}),this.props.groups.map((function(e){return Object(d.jsx)("option",{value:e.groupId.toString(),children:e.name})})),Object(d.jsx)("option",{value:"new",children:"Create new group"})]}),Object(d.jsx)("p",{className:"new-cert-form-title",children:"To"}),Object(d.jsx)("input",{type:"text",className:"new-cert-form-to",onChange:this.props.onChangeTo}),Object(d.jsx)("p",{className:"new-cert-form-title",children:"Name of Certificate"}),Object(d.jsx)("input",{type:"text",className:"new-cert-form-name",onChange:this.props.onChangeTitle}),Object(d.jsx)("p",{className:"new-cert-form-title",children:"Description of Certificate"}),Object(d.jsx)("textarea",{className:"new-cert-form-description",onChange:this.props.onChangeDescription}),Object(d.jsx)("p",{className:"new-cert-form-title",children:"URL"}),Object(d.jsx)("input",{type:"text",className:"new-cert-form-name",onChange:this.props.onChangeUrl}),Object(d.jsx)("p",{className:"new-cert-form-title",children:"Certificate Image"}),Object(d.jsx)("img",{src:e,className:"new-cert-form-image"}),Object(d.jsx)("div",{className:"new-cert-form-image-file-div",children:Object(d.jsxs)("label",{className:"new-cert-form-image-file-label",children:[Object(d.jsx)("input",{type:"file",className:"new-cert-form-image-file",onChange:this.props.onChangeImage}),"\u753b\u50cf\u9078\u629e"]})}),Object(d.jsx)("div",{className:"register-button",onClick:this.props.sign,children:"\u767b\u9332"})]})]})})}}]),r}(a.a.Component),z=function(e){Object(p.a)(r,e);var t=Object(l.a)(r);function r(){return Object(o.a)(this,r),t.call(this)}return Object(u.a)(r,[{key:"render",value:function(){return Object(d.jsx)("div",{className:"new-profile",children:Object(d.jsxs)("div",{className:"new-profile-content",children:[Object(d.jsx)("p",{className:"new-profile-title",children:"\u30e6\u30fc\u30b6\u30fc\u767b\u9332"}),Object(d.jsxs)("div",{className:"new-profile-form",children:[Object(d.jsx)("img",{src:this.props.imageUrl,className:"new-profile-form-image"}),Object(d.jsx)("p",{className:"new-profile-form-title",children:"Name"}),Object(d.jsx)("input",{type:"text",className:"new-profile-form-name",onChange:this.props.onChangeProfileName}),Object(d.jsx)("p",{className:"new-profile-form-title",children:"E-mail"}),Object(d.jsx)("input",{type:"text",className:"new-profile-form-email",onChange:this.props.onChangeProfileEmail}),Object(d.jsx)("div",{className:"register-button",onClick:this.props.registerProfile,children:"\u767b\u9332"})]})]})})}}]),r}(a.a.Component),J=function(e){Object(p.a)(r,e);var t=Object(l.a)(r);function r(){return Object(o.a)(this,r),t.call(this)}return Object(u.a)(r,[{key:"render",value:function(){return Object(d.jsx)("div",{className:"new-group",children:Object(d.jsxs)("div",{className:"new-group-content",children:[Object(d.jsx)("p",{className:"new-group-title",children:"\u767a\u884c\u5143\u306e\u767b\u9332"}),Object(d.jsx)("p",{className:"new-group-description",children:"\u8a3c\u660e\u66f8\u306e\u767a\u884c\u306b\u306f\u767a\u884c\u5143\u3068\u306a\u308b\u56e3\u4f53\uff08\u4f01\u696d\u3001\u6559\u80b2\u6a5f\u95a2\u3001NPO\u6cd5\u4eba\u306a\u3069\uff09\u306e\u767b\u9332\u304c\u5fc5\u8981\u3067\u3059\u3002"}),Object(d.jsxs)("div",{className:"new-group-form",children:[Object(d.jsx)("p",{className:"new-group-form-title",children:"Name"}),Object(d.jsx)("input",{type:"text",className:"new-group-form-name",onChange:this.props.onChangeGroupName}),Object(d.jsx)("p",{className:"new-group-form-title",children:"Address"}),Object(d.jsx)("input",{type:"text",className:"new-group-form-address",onChange:this.props.onChangeGroupAddress}),Object(d.jsx)("p",{className:"new-group-form-title",children:"Phone"}),Object(d.jsx)("input",{type:"text",className:"new-group-form-phone",onChange:this.props.onChangeGroupPhone}),Object(d.jsx)("div",{className:"register-button",onClick:this.props.registerGroup,children:"\u767b\u9332"})]})]})})}}]),r}(a.a.Component),V=function(e){Object(p.a)(r,e);var t=Object(l.a)(r);function r(){return Object(o.a)(this,r),t.call(this)}return Object(u.a)(r,[{key:"componentDidMount",value:function(){this.props.fetchGroup(parseInt(this.props.match.params.id))}},{key:"render",value:function(){var e=this;return Object(d.jsx)("div",{className:"group-members",children:Object(d.jsx)("div",{className:"group-members-content",children:e.props.group?Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{className:"group-members-title",children:[e.props.group.name,"\u306e\u30e1\u30f3\u30d0\u30fc"]}),Object(d.jsx)("input",{type:"text",className:"group-members-invite"}),Object(d.jsx)("button",{className:"group-members-invite-button",onClick:e.props.inviteMember,children:"Invite"}),Object(d.jsx)("div",{className:"group-members-list",children:e.props.group.members.map((function(e){return Object(d.jsxs)("div",{className:"group-members-list-cell",children:[Object(d.jsx)("img",{src:e.imageUrl,className:"group-members-list-cell-icon"}),Object(d.jsxs)("div",{className:"group-members-list-cell-detail",children:[Object(d.jsx)("p",{className:"group-members-list-cell-name",children:e.name}),Object(d.jsx)("p",{className:"group-members-list-cell-address",children:e.address})]})]})}))})]}):Object(d.jsx)("p",{children:"Group not found."})})})}}]),r}(a.a.Component),X=(r(1238),r(35)),q=function(e){Object(p.a)(r,e);var t=Object(l.a)(r);function r(){return Object(o.a)(this,r),t.call(this)}return Object(u.a)(r,[{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(j,{}),Object(d.jsxs)(X.c,{children:[Object(d.jsx)(X.a,{exact:!0,path:"/",component:m}),Object(d.jsx)(X.a,{exact:!0,path:"/signup",render:function(t){return Object(d.jsx)(F,Object(i.a)(Object(i.a)({},t),{},{signIn:e.props.signIn}))}}),Object(d.jsx)(X.a,{exact:!0,path:"/new",render:function(){return Object(d.jsx)(B,{onChangeTitle:e.props.onChangeTitle,onChangeDescription:e.props.onChangeDescription,onChangeUrl:e.props.onChangeUrl,onChangeImage:e.props.onChangeImage,onChangeTo:e.props.onChangeTo,onChangeGroup:e.props.onChangeGroup,fetchGroups:e.props.fetchGroups,sign:e.props.sign,from:e.props.state.from,image:e.props.state.image,groups:e.props.state.groups})}}),Object(d.jsx)(X.a,{exact:!0,path:"/certs/:id",render:function(t){return Object(d.jsx)(M,Object(i.a)(Object(i.a)({},t),{},{certificate:e.props.state.certificate,certificateImage:e.props.state.certificateImage,fetchCertificate:e.props.fetchCertificate}))}}),Object(d.jsx)(X.a,{exact:!0,path:"/certs",render:function(t){return Object(d.jsx)(R,Object(i.a)(Object(i.a)({},t),{},{certificates:e.props.state.certificates,fetchCertificates:e.props.fetchCertificates}))}}),Object(d.jsx)(X.a,{exact:!0,path:"/group/:id",render:function(t){return Object(d.jsx)(V,Object(i.a)(Object(i.a)({},t),{},{group:e.props.state.group,fetchGroup:e.props.fetchGroup,inviteMember:e.props.inviteMember}))}}),Object(d.jsx)(X.a,{exact:!0,path:"/group/new",render:function(t){return Object(d.jsx)(J,Object(i.a)(Object(i.a)({},t),{},{registerGroup:e.props.registerGroup,onChangeGroupName:e.props.onChangeGroupName,onChangeGroupAddress:e.props.onChangeGroupAddress,onChangeGroupPhone:e.props.onChangeGroupPhone}))}}),Object(d.jsx)(X.a,{exact:!0,path:"/profile/new",render:function(t){return Object(d.jsx)(z,Object(i.a)(Object(i.a)({},t),{},{imageUrl:e.props.state.profileImageUrl,registerProfile:e.props.registerProfile,onChangeProfileName:e.props.onChangeProfileName,onChangeProfileEmail:e.props.onChangeProfileEmail,onChangeProfileImage:e.props.onChangeProfileImage}))}})]})]})}}]),r}(a.a.Component),K=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,1245)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))},Q=r(450),W=r(263),Y=r(83),Z={from:"",to:"",title:"",description:"",image:null,url:"",groupName:"",groupAddress:"",groupPhone:"",certificate:{},certificateImage:"",certificates:[],group:null,groups:[],groupId:null,profileName:"",profileEmail:"",profileImage:""};var $=r(451),ee=r(264),te=r(452),re={key:"root",storage:r.n(te).a},ne=Object(ee.a)(re,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ON_CHANGE_TITLE":return Object.assign({},e,{title:t.payload});case"ON_CHANGE_DESCRIPTION":return Object.assign({},e,{description:t.payload});case"ON_CHANGE_IMAGE":return Object.assign({},e,{image:t.payload});case"ON_CHANGE_URL":return Object.assign({},e,{url:t.payload});case"ON_CHANGE_TO":return Object.assign({},e,{to:t.payload});case"ON_CHANGE_GROUP_NAME":return Object.assign({},e,{groupName:t.payload});case"ON_CHANGE_GROUP_ADDRESS":return Object.assign({},e,{groupAddress:t.payload});case"ON_CHANGE_GROUP_PHONE":return Object.assign({},e,{groupPhone:t.payload});case"ON_CHANGE_GROUP":return Object.assign({},e,{groupId:parseInt(t.payload)});case"ON_CHANGE_PROFILE_NAME":return Object.assign({},e,{profileName:t.payload});case"ON_CHANGE_PROFILE_EMAIL":case"ON_CHANGE_PROFILE_EMAIL":return Object.assign({},e,{profileEmail:t.payload});case"ON_CHANGE_PROFILE_IMAGE":return Object.assign({},e,{image:t.payload});case"LOGGED_IN":return Object.assign({},e,{from:t.payload});case"FETCHED_CERTIFICATE":return Object.assign({},e,{certificate:t.payload});case"FETCHED_CERTIFICATES":return Object.assign({},e,{certificates:t.payload});case"FETCHED_CERTIFICATE_IMAGE":return Object.assign({},e,{certificateImage:t.payload});case"FETCHED_GROUPS":return Object.assign({},e,{groups:t.payload});case"FETCHED_GROUP":return Object.assign({},e,{group:t.payload});default:return Z}})),ae=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Y.c,ce=Object(Y.d)(Object(Y.b)({state:ne}),Z,ae(Object(Y.a)($.a))),se=Object(ee.b)(ce),ie=ce;var oe=Object(W.b)((function(e,t){return e}),(function(e,t){return{onChangeTitle:function(t){e(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(r,n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ON_CHANGE_TITLE",payload:e.target.value});case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(t))},onChangeDescription:function(t){e(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(r,n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ON_CHANGE_DESCRIPTION",payload:e.target.value});case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(t))},onChangeUrl:function(t){e(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(r,n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ON_CHANGE_URL",payload:e.target.value});case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(t))},onChangeTo:function(t){e(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(r,n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ON_CHANGE_TO",payload:e.target.value});case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(t))},onChangeImage:function(t){e(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(r,n){var a,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.target.files[0],(c=new FileReader).onload=function(){r({type:"ON_CHANGE_IMAGE",payload:c.result})},c.readAsArrayBuffer(a);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(t))},onChangeGroupName:function(t){e(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(r,n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ON_CHANGE_GROUP_NAME",payload:e.target.value});case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(t))},onChangeGroupAddress:function(t){e(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(r,n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ON_CHANGE_GROUP_ADDRESS",payload:e.target.value});case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(t))},onChangeGroupPhone:function(t){e(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(r,n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ON_CHANGE_GROUP_PHONE",payload:e.target.value});case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(t))},onChangeGroup:function(t){e(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(r,n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("new"!==e.target.value){t.next=3;break}return h.push("/group/new"),t.abrupt("return");case 3:r({type:"ON_CHANGE_GROUP",payload:e.target.value});case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(t))},onChangeProfileName:function(t){e(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(r,n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ON_CHANGE_PROFILE_NAME",payload:e.target.value});case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(t))},onChangeProfileEmail:function(t){e(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(r,n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"ON_CHANGE_PROFILE_EMAIL",payload:e.target.value});case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(t))},onChangeProfileImage:function(t){e(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(r,n){var a,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.target.files[0],(c=new FileReader).onload=function(){r({type:"ON_CHANGE_PROFILE_IMAGE",payload:c.result})},c.readAsArrayBuffer(a);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(t))},sign:function(){e(function(){var e=Object(x.a)(O.a.mark((function e(t,r){var n,a,c,s,i,o,u,p,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=P(),e.next=8;break;case 4:return e.prev=4,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return");case 8:if(a=r().state,c=a.image){e.next=13;break}return alert("Image not set."),e.abrupt("return");case 13:return e.prev=13,e.next=16,n.uploadImageToIpfs(c);case 16:s=e.sent,e.next=24;break;case 19:return e.prev=19,e.t1=e.catch(13),console.error(e.t1),alert("Failed to post the image to IPFS."),e.abrupt("return");case 24:return e.next=26,n.web3.eth.getAccounts();case 26:return i=e.sent,e.prev=27,e.next=30,y.getPublicAddressByGoogle(a.to);case 30:o=e.sent,e.next=38;break;case 33:return e.prev=33,e.t2=e.catch(27),console.error(e.t2),alert("to google email address is invalid."),e.abrupt("return");case 38:if(o){e.next=41;break}return alert("to google email address is invalid."),e.abrupt("return");case 41:if(u=a.groupId,p={context:{},title:a.title,description:a.description,from:i[0],to:o,issued_at:(new Date).getTime(),url:a.url,image:s,groupId:u},n.isCertificate(p)){e.next=46;break}return alert("Invalid Certificate."),e.abrupt("return");case 46:return l=null,e.prev=47,e.next=50,n.signCertificate(p);case 50:l=e.sent,e.next=58;break;case 53:return e.prev=53,e.t3=e.catch(47),console.error(e.t3),alert("Failed to sign the certificate."),e.abrupt("return");case 58:return e.prev=58,e.next=61,n.sendSignedCertificateToGx(l);case 61:e.next=68;break;case 63:return e.prev=63,e.t4=e.catch(58),console.error(e.t4),alert("Failed to post the signed certificate."),e.abrupt("return");case 68:h.push("/certs");case 69:case"end":return e.stop()}}),e,null,[[0,4],[13,19],[27,33],[47,53],[58,63]])})));return function(t,r){return e.apply(this,arguments)}}())},fetchCertificate:function(t){e(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(r){var n,a,c,s,i,o;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A();case 3:n=t.sent,t.next=10;break;case 6:return t.prev=6,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return");case 10:return t.prev=10,t.next=13,n.getCertByCid(e);case 13:a=t.sent,t.next=20;break;case 16:return t.prev=16,t.t1=t.catch(10),console.error(t.t1),t.abrupt("return");case 20:return r({type:"FETCHED_CERTIFICATE",payload:a}),c=a.image,t.prev=22,t.next=25,S(c);case 25:s=t.sent,t.next=32;break;case 28:return t.prev=28,t.t2=t.catch(22),console.error(t.t2),t.abrupt("return");case 32:return r({type:"FETCHED_CERTIFICATE_IMAGE",payload:s}),t.next=35,n.getGroup(a.groupId);case 35:return i=t.sent,a.from=i.name,r({type:"FETCHED_CERTIFICATE",payload:a}),t.next=40,n.getProfile(a.to);case 40:o=t.sent,a.to=o.name,r({type:"FETCHED_CERTIFICATE",payload:a});case 43:case"end":return t.stop()}}),t,null,[[0,6],[10,16],[22,28]])})));return function(e){return t.apply(this,arguments)}}()}(t))},fetchCertificates:function(){e(function(){var e=Object(x.a)(O.a.mark((function e(t,r){var n,a,c,s,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r().state,""!==(a=n.from)&&a){e.next=5;break}return h.push("/top"),e.abrupt("return");case 5:return e.prev=5,e.next=8,A();case 8:c=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),console.error(e.t0),e.abrupt("return");case 15:return e.prev=15,e.next=18,c.getReceivedCerts(a);case 18:s=e.sent,e.next=25;break;case 21:return e.prev=21,e.t1=e.catch(15),console.error(e.t1),e.abrupt("return");case 25:for(i=function(e){S(s[e].image).then((function(r){s[e].imageUrl=r,t({type:"FETCHED_CERTIFICATES",payload:s})}))},o=0;o<s.length;o++)i(o);t({type:"FETCHED_CERTIFICATES",payload:s});case 28:case"end":return e.stop()}}),e,null,[[5,11],[15,21]])})));return function(t,r){return e.apply(this,arguments)}}())},fetchCertificateImage:function(t){e(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(r){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S(e);case 3:n=t.sent,t.next=10;break;case 6:return t.prev=6,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return");case 10:r({type:"FETCHED_CERTIFICATE_IMAGE",payload:n});case 11:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}(t))},fetchGroups:function(){e(function(){var e=Object(x.a)(O.a.mark((function e(t,r){var n,a,c,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=P(),e.next=8;break;case 4:return e.prev=4,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return");case 8:return a=r().state,c=a.from,e.prev=10,e.next=13,n.getGroups(c);case 13:s=e.sent,e.next=20;break;case 16:return e.prev=16,e.t1=e.catch(10),console.error(e.t1),e.abrupt("return");case 20:t({type:"FETCHED_GROUPS",payload:s});case 21:case"end":return e.stop()}}),e,null,[[0,4],[10,16]])})));return function(t,r){return e.apply(this,arguments)}}())},fetchGroup:function(t){e(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(r,n){var a,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A();case 3:a=t.sent,t.next=10;break;case 6:return t.prev=6,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return");case 10:return t.prev=10,t.next=13,a.getGroup(e);case 13:c=t.sent,t.next=20;break;case 16:return t.prev=16,t.t1=t.catch(10),console.error(t.t1),t.abrupt("return");case 20:r({type:"FETCHED_GROUP",payload:c});case 21:case"end":return t.stop()}}),t,null,[[0,6],[10,16]])})));return function(e,r){return t.apply(this,arguments)}}()}(t))},signIn:function(){e(function(){var e=Object(x.a)(O.a.mark((function e(t){var r,n,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.init();case 2:return e.next=4,y.login();case 4:return r=e.sent,n=P(r),e.next=8,n.init();case 8:return e.next=10,n.web3.eth.getAccounts();case 10:if(0!==(a=e.sent).length){e.next=14;break}return console.log("Failed to login."),e.abrupt("return");case 14:return c=a[0],t({type:"LOGGED_IN",payload:c}),e.prev=16,e.next=19,n.getProfile(c);case 19:e.sent,e.next=27;break;case 22:return e.prev=22,e.t0=e.catch(16),console.error(e.t0),h.push("/profile/new"),e.abrupt("return");case 27:h.push("/certs");case 28:case"end":return e.stop()}}),e,null,[[16,22]])})));return function(t){return e.apply(this,arguments)}}())},registerGroup:function(){e(function(){var e=Object(x.a)(O.a.mark((function e(t,r){var n,a,c,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=P(),e.next=8;break;case 4:return e.prev=4,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return");case 8:return a=r().state,c=a.from,s=a.groupName,a.groupAddress,a.groupPhone,e.prev=13,e.next=16,n.createGroup(s,c);case 16:e.next=23;break;case 18:return e.prev=18,e.t1=e.catch(13),console.error(e.t1),alert("Failed to create group."),e.abrupt("return");case 23:h.push("/certs");case 24:case"end":return e.stop()}}),e,null,[[0,4],[13,18]])})));return function(t,r){return e.apply(this,arguments)}}())},registerProfile:function(){e(function(){var e=Object(x.a)(O.a.mark((function e(t,r){var n,a,c,s,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=P(),e.next=8;break;case 4:return e.prev=4,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return");case 8:return a=r().state,c=a.profileName,s=a.profileEmail,i=a.from,e.prev=12,e.next=15,n.signProfile({name:c,email:s},{address:i});case 15:o=e.sent,e.next=23;break;case 18:return e.prev=18,e.t1=e.catch(12),console.error(e.t1),alert("Failed to sign profile."),e.abrupt("return");case 23:return e.prev=23,e.next=26,n.sendSignedProfileToGx(i,o);case 26:e.next=33;break;case 28:return e.prev=28,e.t2=e.catch(23),console.error(e.t2),alert("Failed to register profile."),e.abrupt("return");case 33:h.push("/certs");case 34:case"end":return e.stop()}}),e,null,[[0,4],[12,18],[23,28]])})));return function(t,r){return e.apply(this,arguments)}}())},inviteMember:function(){e(function(){var e=Object(x.a)(O.a.mark((function e(t,r){var n,a,c,s,i,o,u,p;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=P(),e.next=8;break;case 4:return e.prev=4,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return");case 8:return a=r().state,c=a.from,s=a.group.groupId,i=a.group.emailToInvite,e.prev=12,e.next=15,y.getPublicAddressByGoogle(i);case 15:o=e.sent,e.next=23;break;case 18:return e.prev=18,e.t1=e.catch(12),console.error(e.t1),alert("Email is not registered."),e.abrupt("return");case 23:return e.prev=23,e.next=26,n.signMemberAddress(o,{address:c});case 26:u=e.sent,e.next=34;break;case 29:return e.prev=29,e.t2=e.catch(23),console.error(e.t2),alert("Failed to sign for invitation."),e.abrupt("return");case 34:return e.prev=34,e.next=37,n.inviteMemberToGroup(s,u);case 37:e.next=44;break;case 39:return e.prev=39,e.t3=e.catch(34),console.error(e.t3),alert("Failed to send invitation."),e.abrupt("return");case 44:return e.prev=44,e.next=47,n.getGroup(s);case 47:p=e.sent,e.next=54;break;case 50:return e.prev=50,e.t4=e.catch(44),console.error(e.t4),e.abrupt("return");case 54:t({type:"FETCHED_GROUP",payload:p});case 55:case"end":return e.stop()}}),e,null,[[0,4],[12,18],[23,29],[34,39],[44,50]])})));return function(t,r){return e.apply(this,arguments)}}())}}}))(Object(X.f)(q));s.a.render(Object(d.jsx)(W.a,{store:ie,children:Object(d.jsx)(Q.a,{loading:null,persistor:se,children:Object(d.jsx)(b.a,{history:h,children:Object(d.jsx)(oe,{})})})}),document.getElementById("root")),K()},459:function(e,t,r){},511:function(e,t){},534:function(e,t){},536:function(e,t){},603:function(e,t){},605:function(e,t){},637:function(e,t){},642:function(e,t){},644:function(e,t){},651:function(e,t){},664:function(e,t){},687:function(e,t){},704:function(e,t){},808:function(e,t){},814:function(e,t){},826:function(e,t){},827:function(e,t){}},[[1241,1,2]]]);
//# sourceMappingURL=main.fad96f15.chunk.js.map